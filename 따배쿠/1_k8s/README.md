# Kubernetes

- kubernetes?
- 선언적 API

k8s - k랑 s 사이에 글자가 8개라서 k8s 란다.
경량 버전으로 k3s 라는 것도 있다.

## 배경

Docker 의 등장으로 어플리케이션의 수평적 확장이 매우 용이해졌다.

- OS 와 Application을 분리할 수 있어졌기 때문에.
- Docker Daemon을 포함한 Docker Engine 덕분에.

MSA 가 자연스럽게 따라오고,

그에 대한 오케스트레이션 도구로 Kubernetes가 의미를 갖는다.

## 선언적 API

동작이 아닌 상태를 기술하는 방식의 API이다. 명령적 API와 대조된다.
각 단계에서 무엇을 하라고 지시하는 게 아닌, 원하는 상태를 기술해 해당 상태와 어긋나면
그를 맞추기 위한 행동을 수행한다.

당연하게도, 행동에 여러 분기가 있는 등의 복잡한 양식을 정의하는 것은 한계가 있다. 따라서, 쉽고 간단한 상태를 기술한다. 크게 CRUD의 행동 범위 안에서 작성된다고 이해하면 좋겠다.

상태를 기술하고 나면, 해당 상태에 도달하기까지의 Backend 로직에 대해 개발자가 신경쓰지 않아도 된다는 점이 큰 장점이다.

> 그래서 어떻게 그게 가능한지 의문이 드는 것을 보면, 코드를 보아야 겠다.

### [Declarative Programming](https://www.mobilesystemdesign.com/blog/declarative-api-design/)

모바일을 위한 글이지만, 그 내용을 살펴보면

- 상태를 기술하면 해당 상태인지 아닌지를 판단해야 한다.
- 그를 위한 `Validator`를 구현한다.
- `Rule`은 간단한 input을 받아 결과물을 반환하는 함수다. 일반적으로 boolean을 반환한다.
- `Validator`는 `Rule`들을 가지고, 차례차례 그 Rule에 부합하는지 검사한다.
- 부합하지 않으면 그 불일치를 해결할 로직을 작성한다.

와 같이 구현되어 있음을 이해할 수 있다.

다음은 GPT가 제시한 설명에서의 키워드였다.

- 멱등성 : 상태 변경이 실패해도 다시 실행 가능하다.
- 자동 복구
- 상태 관리 방식 (~~React?~~)
  - 이벤트 트리거 방식으로 작동
